<mxfile host="drawio-plugin" modified="2022-07-30T21:34:28.589Z" agent="5.0 (Macintosh; Intel Mac OS X 12_1_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36" version="15.5.4" etag="FM24sfC1fGl-hUsjZB2C" type="embed"><diagram id="lKT0S-oukDyWF4fce_Ty" name="Page-1"><mxGraphModel dx="1265" dy="697" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="2" target="3"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="18" value="If replica 1 &lt;br style=&quot;font-size: 15px;&quot;&gt;is not avaliable" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;" vertex="1" connectable="0" parent="17"><mxGeometry x="-0.2182" y="2" relative="1" as="geometry"><mxPoint x="-193" y="152" as="offset"/></mxGeometry></mxCell><mxCell id="13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="6" target="9"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6" value="User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1"><mxGeometry x="70" y="30" width="30" height="60" as="geometry"/></mxCell><mxCell id="14" value="Select from distributed table (only view)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;" vertex="1" parent="1"><mxGeometry x="110" y="20" width="160" height="30" as="geometry"/></mxCell><mxCell id="26" value="&lt;span style=&quot;font-family: &amp;#34;gentium book basic&amp;#34; , serif&quot;&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;&amp;nbsp;The data will be accessed on the first available replica.&lt;/font&gt;&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;fontColor=#F0F0F0;labelBackgroundColor=default;" vertex="1" parent="1"><mxGeometry x="195" y="110" width="190" height="30" as="geometry"/></mxCell><mxCell id="27" value="Node 03" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=default;fontSize=15;fontColor=#F0F0F0;" vertex="1" parent="1"><mxGeometry x="420" y="290" width="60" height="30" as="geometry"/></mxCell><mxCell id="39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=15;fontColor=#F0F0F0;" edge="1" parent="1" source="29" target="11"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="29" value="Node 01" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=default;fontSize=15;fontColor=#F0F0F0;" vertex="1" parent="1"><mxGeometry x="135" y="290" width="60" height="30" as="geometry"/></mxCell><mxCell id="35" value="" style="group" vertex="1" connectable="0" parent="1"><mxGeometry x="100" y="160" width="130" height="130" as="geometry"/></mxCell><mxCell id="2" value="Shard 1&lt;br&gt;Replica 1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;labelBackgroundColor=default;labelBorderColor=#FF33FF;" vertex="1" parent="35"><mxGeometry width="130" height="130" as="geometry"/></mxCell><mxCell id="9" value="DB shard" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="35"><mxGeometry x="35" width="60" height="30" as="geometry"/></mxCell><mxCell id="48" value="" style="endArrow=classic;html=1;rounded=0;fontSize=15;fontColor=#F0F0F0;exitX=0;exitY=0;exitDx=0;exitDy=40;exitPerimeter=0;entryX=-0.023;entryY=0.615;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="35" source="2" target="2"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="520" y="170" as="sourcePoint"/><mxPoint x="-50" y="80" as="targetPoint"/><Array as="points"><mxPoint x="-60" y="40"/><mxPoint x="-60" y="80"/></Array></mxGeometry></mxCell><mxCell id="36" value="" style="group" vertex="1" connectable="0" parent="1"><mxGeometry x="100" y="440" width="130" height="160" as="geometry"/></mxCell><mxCell id="33" value="Node 02" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=default;fontSize=15;fontColor=#F0F0F0;" vertex="1" parent="36"><mxGeometry x="40" y="130" width="60" height="30" as="geometry"/></mxCell><mxCell id="4" value="Shard 1&lt;br&gt;Replica 2" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;labelBorderColor=#FF33FF;" vertex="1" parent="36"><mxGeometry width="130" height="130" as="geometry"/></mxCell><mxCell id="11" value="DB replica" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="36"><mxGeometry x="35" width="60" height="30" as="geometry"/></mxCell><mxCell id="37" value="" style="group" vertex="1" connectable="0" parent="1"><mxGeometry x="390" y="160" width="130" height="130" as="geometry"/></mxCell><mxCell id="3" value="Shard 2&lt;br&gt;Replica 1" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;labelBorderColor=#FFFF00;" vertex="1" parent="37"><mxGeometry width="130" height="130" as="geometry"/></mxCell><mxCell id="10" value="DB shard" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="37"><mxGeometry x="35" width="60" height="30" as="geometry"/></mxCell><mxCell id="38" value="" style="group" vertex="1" connectable="0" parent="1"><mxGeometry x="390" y="440" width="130" height="160" as="geometry"/></mxCell><mxCell id="34" value="Node 04" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=default;fontSize=15;fontColor=#F0F0F0;" vertex="1" parent="38"><mxGeometry x="30" y="130" width="60" height="30" as="geometry"/></mxCell><mxCell id="5" value="Shard 2&lt;br&gt;Replica 2" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;labelBorderColor=#FFFF00;" vertex="1" parent="38"><mxGeometry width="130" height="130" as="geometry"/></mxCell><mxCell id="12" value="DB replica" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="38"><mxGeometry x="30" width="60" height="30" as="geometry"/></mxCell><mxCell id="40" value="Select from replicated table" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;" vertex="1" parent="1"><mxGeometry x="250" y="190" width="120" height="30" as="geometry"/></mxCell><mxCell id="46" value="Данные хранятся в БД Shard и реплицируются в БД replica&lt;br&gt;&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;labelBorderColor=none;fontSize=15;fontColor=#F0F0F0;" vertex="1" parent="1"><mxGeometry x="20" y="670" width="510" height="20" as="geometry"/></mxCell><mxCell id="47" value="Запросы от дистрибутивной таблицы будут приходить в первую доступную реплику" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBackgroundColor=none;labelBorderColor=none;fontSize=15;fontColor=#F0F0F0;" vertex="1" parent="1"><mxGeometry x="25" y="710" width="530" height="30" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>